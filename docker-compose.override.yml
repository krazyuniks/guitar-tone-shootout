# docker-compose.override.yml
# Auto-generated by worktree.py - DO NOT EDIT MANUALLY
# Worktree: main
# Branch: main
# Generated: 2025-12-27T11:20:46.670111+00:00
#
# This file overrides docker-compose.yml with worktree-specific ports and volumes.
# The shared model cache volume (gts-model-cache) is mounted read-only.

services:
  backend:
    container_name: gts-main-backend
    ports:
      - "127.0.0.1:8000:8000"
    volumes:
      - ./backend:/app
      - ./pipeline:/pipeline:ro
      - gts-model-cache:/data/models/cache:ro
      - gts-main-uploads:/data/uploads
    environment:
      - PUBLIC_API_URL=http://localhost:8000

  frontend:
    container_name: gts-main-frontend
    ports:
      - "127.0.0.1:4321:4321"
    environment:
      - PUBLIC_API_URL=http://localhost:8000

  worker:
    container_name: gts-main-worker
    volumes:
      - ./backend:/app
      - ./pipeline:/pipeline:ro
      - gts-model-cache:/data/models/cache:ro

  db:
    container_name: gts-main-db
    ports:
      - "127.0.0.1:5432:5432"
    volumes:
      - gts-main-postgres:/var/lib/postgresql/data

  redis:
    container_name: gts-main-redis
    ports:
      - "127.0.0.1:6379:6379"
    volumes:
      - gts-main-redis:/data

volumes:
  gts-main-postgres:
  gts-main-redis:
  gts-main-uploads:
  gts-model-cache:
    external: true